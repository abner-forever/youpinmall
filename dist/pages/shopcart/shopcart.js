console.log("\u52A0\u8F7Dshopcart.js"),require(["../../js/conf/config"],function(){require(["jquery","common"],function(a,b){a(function(){var c=[],d=b.getCookie("list");if(console.log(d),d){var c=JSON.parse(d);console.log("cookie \u5B58\u5728")}var e=0;a.each(c,function(a,b){e+=b.count}),a(".top").load("http://localhost:9000/pages/templates/index/top.html"),a(".header").load("http://localhost:9000/pages/templates/index/header.html",function(){0!=e&&a(".m-cart-news").text(e)}),a(".footer").load("http://localhost:9000/pages/templates/index/footer.html"),a(".goods-list").load("http://localhost:9000/pages/templates/shoplist.html",function(){var b=template("shoplist",{shoplist:c});a(".goods-list").html(b),console.log("\u52A0\u8F7D\u6210\u529F"),a(".add-num").on("click",function(){var b=a(this).parent().parent().siblings(".product").text(),f=+a(this).parent().parent().siblings(".price").find("span").text(),g=+a(this).parent().find(".text").text()+1;a(this).parent().parent().siblings(".total").find("span").text(g*f),a(this).parent().find(".text").text(g),a(".m-cart-news").text(++e),a.each(c,function(a,c){c.name==b&&(c.count=g)});var h=JSON.stringify(c),i=new Date;i.setDate(i.getDate()+3),document.cookie="list="+h+"; expires="+i+";path=/"}),a(".reduce-num").on("click",function(){var b=a(this).parent().parent().siblings(".product").text(),f=+a(this).parent().find(".text").text()-1;if(0!=f){a(".m-cart-news").text(--e);var g=+a(this).parent().parent().siblings(".price").find("span").text();a(this).parent().parent().siblings(".total").find("span").text(f*g),a(this).parent().find(".text").text(f),a.each(c,function(a,c){c.name==b&&(c.count=f)});var h=JSON.stringify(c),i=new Date;i.setDate(i.getDate()+3),document.cookie="list="+h+"; expires="+i+";path=/"}}),a(".edit").on("click",function(){console.log("delete"),a(this).parent().parent().siblings(".delete-box").show(),a(".close-box").click(function(){a(this).parent().parent(".delete-box").hide()}),a(".cancel").click(function(){a(this).parent().parent(".delete-box").hide()});var b=this;a(".affirm").click(function(){var f=a(b).siblings(".product").text();a.each(c,function(b,d){d.name==f&&(c.splice(b,1),e-=d.count,0==e?a(".m-cart-news").text(""):a(".m-cart-news").text(e))});var g=JSON.stringify(c),h=new Date;h.setDate(h.getDate()+3),document.cookie="list="+g+"; expires="+h+";path=/",a(b).parent().parent().parent().remove()})})})})})});
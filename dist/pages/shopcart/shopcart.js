console.log("\u52A0\u8F7Dshopcart.js"),require(["../../js/conf/config"],function(){require(["jquery","common"],function(a,b){a(function(){var c=[],d=b.getCookie("list");if(d)var c=JSON.parse(d);let e=[],f=b.getCookie("userlist");f&&(e=JSON.parse(f));var g=0;a.each(c,function(a,b){g+=b.count}),a(".top").load("/pages/templates/index/top.html",function(){f?(console.log("yes"),a(".haslog").show(),a(".unlog").hide(),a(".user-center").mouseenter(function(){a(".user-drop").slideToggle("fast","linear")}),a(".user-center").mouseleave(function(){a(".user-drop").hide()}),a(".my-order").on("click",function(){window.open("/pages/personal/personal.html")}),a(".logout").click(function(){console.log("out");var a=new Date;a.setDate(a.getDate()-999),document.cookie="userlist="+f+";expires="+a+";path=/",window.location.href="/"})):(a(".haslog").hide(),a(".unlog").show())}),a(".header").load("/pages/templates/index/header.html",function(){0!=g&&a(".m-cart-news").text(g),a(".m-search-input").on("input",function(){a(".hint").show(),a(".m-search-box").addClass("input-bottom"),a.ajax({type:"get",url:`http://suggestion.baidu.com/?wd=`+a(this).val(),dataType:"jsonp",jsonp:"cb",success:function(b){a(".hint ul").html(""),b.s.forEach(b=>{var c=document.createElement("li");c.innerText=b,a(".hint ul").append(c)}),a(".hint ul").on("click","li",function(){a(".m-search-input").val(a(this).text()),a(".hint").hide()})},error:function(){console.log("search error")}})}),a(".m-search-input").blur(function(){a(".m-search-box").removeClass("input-bottom")})}),a(".footer").load("/pages/templates/index/footer.html"),a(".goods-list").load("/pages/templates/shoplist.html",function(){var b=template("shoplist",{shoplist:c});a(".goods-list").html(b),console.log("\u52A0\u8F7D\u6210\u529F"),a(".add-num").on("click",function(){var b=a(this).parent().parent().siblings(".product").text(),e=+a(this).parent().parent().siblings(".price").find("span").text(),f=+a(this).parent().find(".text").text()+1;a(this).parent().parent().siblings(".total").find("span").text(f*e),a(this).parent().find(".text").text(f),a(".m-cart-news").text(++g),a.each(c,function(a,c){c.name==b&&(c.count=f)});var h=JSON.stringify(c),i=new Date;i.setDate(i.getDate()+3),document.cookie="list="+h+"; expires="+i+";path=/"}),a(".reduce-num").on("click",function(){var b=a(this).parent().parent().siblings(".product").text(),e=+a(this).parent().find(".text").text()-1;if(0!=e){a(".m-cart-news").text(--g);var f=+a(this).parent().parent().siblings(".price").find("span").text();a(this).parent().parent().siblings(".total").find("span").text(e*f),a(this).parent().find(".text").text(e),a.each(c,function(a,c){c.name==b&&(c.count=e)});var h=JSON.stringify(c),i=new Date;i.setDate(i.getDate()+3),document.cookie="list="+h+"; expires="+i+";path=/"}}),a(".edit").on("click",function(){console.log("delete"),a(this).parent().parent().siblings(".delete-box").show(),a(".close-box").click(function(){a(this).parent().parent(".delete-box").hide()}),a(".cancel").click(function(){a(this).parent().parent(".delete-box").hide()});let b=this;a(".affirm").click(function(){let e,f=a(b).siblings(".product").text();a.each(c,function(b,c){c.name==f&&(e=b,g-=c.count,0==g?(console.log("0"),a(".m-cart-news").text("")):a(".m-cart-news").text(g))}),c.splice(e,1);var h=JSON.stringify(c),i=new Date;i.setDate(i.getDate()+3),document.cookie="list="+h+"; expires="+i+";path=/",a(b).parent().parent().parent().remove()})})}),a(window).scroll(function(){500<=a(this).scrollTop()?(a(".m-header-fix").addClass("m-header-fixed"),a(".nav-part").show(),a(".m-kind").find(".nav-part").on("mouseover",function(){a(".nav-container").addClass("nav-container-fix").show(200)}),a(".m-kind").find(".nav-part").on("mouseout",function(){a(".nav-container").removeClass("nav-container-fix")})):(a(".m-header-fix").removeClass("m-header-fixed"),a(".nav-part").hide());var b=Math.round((a(this).scrollTop()-1e3)/600);a("#LoutiNav ul li:not(last)").eq(b).addClass("hover").siblings().removeClass("hover")})})})});